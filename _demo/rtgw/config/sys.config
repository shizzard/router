[
  {rtgw, [
    {tunnel, [
      {listener, [
        {host, "localhost"},
        {port, ${RTGW_APP_TUNNEL_LISTENER_PORT}}
      ]}
    ]}
  ]},
  {rtgw_grpc, [
    {listener, [
      {port, ${RTGW_APP_GRPC_LISTENER_PORT}}
    ]},
    {client, [
      {host, "localhost"},
      {port, ${ROUTER_APP_GRPC_LISTENER_PORT}}
    ]}
  ]},
  {kernel, [
    {logger_sasl_compatible, false},
    {logger_level, ${RTGW_APP_LOGGER_LOG_LEVEL}},
    {logger, [
      %% Console logger
      {handler, default, logger_std_h, #{
        level => emergency,
        formatter => {rtgw_log_f, #{
          map_depth => 5,
          term_depth => 50
        }}
      }},
      %% Disk logger for errors
      {handler, disk_error, logger_disk_log_h, #{
        level => error,
        formatter => {rtgw_log_f, #{
          map_depth => 5,
          term_depth => 50
        }},
        filters => [{progress, {fun logger_filters:progress/2, stop}}],
        config => #{
          file => "${RTGW_APP_LOGGER_LOG_ROOT}/${RTGW_VMARGS_SNAME}_error.log",
          type => wrap,
          max_no_files => 10,
          max_no_bytes => 52428800 % 10 x 5mb
        }
      }},
      %% Disk logger for info
      {handler, disk_info, logger_disk_log_h, #{
        level => info,
        formatter => {rtgw_log_f, #{
          map_depth => 5,
          term_depth => 50
        }},
        filters => [{progress, {fun logger_filters:progress/2, stop}}],
        config => #{
          file => "${RTGW_APP_LOGGER_LOG_ROOT}/${RTGW_VMARGS_SNAME}_info.log",
          type => wrap,
          max_no_files => 10,
          max_no_bytes => 52428800 % 10 x 5mb
        }
      }},
      %% Disk logger for debug
      {handler, disk_debug, logger_disk_log_h, #{
        level => debug,
        formatter => {rtgw_log_f, #{
          map_depth => 5,
          term_depth => 50
        }},
        filters => [{progress, {fun logger_filters:progress/2, stop}}],
        config => #{
          file => "${RTGW_APP_LOGGER_LOG_ROOT}/${RTGW_VMARGS_SNAME}_debug.log",
          type => wrap,
          max_no_files => 10,
          max_no_bytes => 52428800 % 10 x 5mb
        }
      }}
    ]}
  ]},
  {sasl, [
    {utc_log, true},
    {sasl_error_logger, false}
  ]}
].
